# Проєкт: Підбір керівника для написання курсової роботи

Веб-додаток на Django для підбору викладача для написання курсової роботи відповідно до кафедри та наукових інтересів.

## Функціонал

### Для студентів:
- Реєстрація через Microsoft OAuth
- Створення профілю студента
- Пошук викладачів за кафедрою та науковими інтересами
- Надсилання запиту викладачу
- Перегляд статусу запиту
- Перегляд інформації про прикріпленого викладача

### Для викладачів:
- Реєстрація через Microsoft OAuth
- Створення профілю викладача
- Керування слотами (створення, видалення)
- Перегляд запитів від студентів
- Підтвердження/відхилення запитів
- Перегляд прикріплених студентів

## Технології

- Django 4.2
- PostgreSQL
- django-allauth (Microsoft OAuth)
- Docker & Docker Compose

## Швидкий старт

### Варіант 1: Використання скрипта (рекомендовано)

```bash
# Надайте права на виконання (Linux/Mac)
chmod +x start.sh

# Запуск
./start.sh
```

### Варіант 2: Ручний запуск

```bash
# 1. Запуск контейнерів
docker-compose up --build -d

# 2. Створення міграцій
docker-compose exec web python manage.py makemigrations

# 3. Застосування міграцій
docker-compose exec web python manage.py migrate

# 4. Створення суперкористувача
docker-compose exec web python manage.py createsuperuser


```

## Доступ до проєкту

- **Головна сторінка**: http://localhost:8000/
- **Адмін-панель**: http://localhost:8000/admin/
- **Вхід**: http://localhost:8000/accounts/login/

## Налаштування

### Змінні середовища (.env)

Створіть файл `.env` в корені проєкту:



### Налаштування Microsoft OAuth

1. Створіть додаток в Azure AD
2. Додайте redirect URI: `http://localhost:8000/accounts/microsoft/login/callback/`
3. Отримайте Tenant ID та додайте його в `.env`

## Структура проєкту

```
adviser-search/
├── mentorion/              # Головні налаштування Django
├── users/                  # Модель користувача та автентифікація
├── profiles/               # Профілі студентів та викладачів
│   ├── models.py          # StudentProfile, TeacherProfile, Department, ScientificInterest
│   ├── views.py           # Views для профілів
│   ├── forms.py           # OnboardingForm
│   └── management/        # Management commands
├── searching/              # Пошук та запити
│   ├── models.py          # Slot, SlotRequest
│   ├── views.py           # Views для пошуку та запитів
│   └── templates/         # Шаблони
├── docker-compose.yml      # Docker конфігурація
├── Dockerfile              # Образ Django
└── requirements.txt        # Залежності Python
```

## Корисні команди

```bash
# Переглянути логи
docker-compose logs -f web

# Зупинити контейнери
docker-compose down

# Перезапустити
docker-compose restart

# Виконати команду Django
docker-compose exec web python manage.py <command>

# Відкрити shell
docker-compose exec web bash

# Переглянути базу даних
docker-compose exec db psql -U postgres -d kursova_db
```

## Розв'язання проблем

### База даних не підключається

```bash
docker-compose restart
docker-compose logs db
```

### Міграції не застосовуються

```bash
docker-compose down -v
docker-compose up --build
docker-compose exec web python manage.py migrate
```

### Помилки з Microsoft OAuth

Перевірте налаштування в `.env` файлі та Azure AD.

## Розробка

### Додавання нових моделей

```bash
docker-compose exec web python manage.py makemigrations
docker-compose exec web python manage.py migrate
```

### Створення тестових даних

```bash
docker-compose exec web python manage.py init_test_data
```

## Детальний опис функціоналу

### Моделі даних

#### Профілі користувачів (`profiles` app)
- **Department**: Кафедри університету з унікальними назвами
- **ScientificInterest**: Наукові інтереси та теми досліджень
- **StudentProfile**: Профіль студента з інформацією про групу, курс, спеціалізацію, тему курсової та кафедру (обов'язково для 3-4 курсів)
- **TeacherProfile**: Профіль викладача з кафедрою, науковими інтересами, біографією, максимальною кількістю слотів та статусом підтвердження

#### Система пошуку (`searching` app)
- **Slot**: Консультаційний слот викладача, який може бути призначений одному студенту. Містить інформацію про доступність, заповненість та тему
- **SlotRequest**: Запит студента на слот викладача зі статусом (очікує/підтверджено/відхилено/скасовано) та додатковим повідомленням

### Бізнес-логіка

#### Для студентів:
1. **Онбординг**: Після реєстрації студент заповнює профіль з обов'язковою інформацією
2. **Пошук викладачів**: Фільтрація за кафедрою, науковими інтересами та доступними слотами
3. **Подання запитів**: Студент може подати запит на конкретний слот з повідомленням
4. **Управління запитами**: Перегляд статусу всіх поданих запитів
5. **Призначення**: Після схвалення запиту слот призначається студенту, і він більше не може змінювати тему курсової

#### Для викладачів:
1. **Онбординг**: Викладач заповнює профіль, який потребує підтвердження адміністратором
2. **Створення слотів**: Викладач може створювати обмежену кількість слотів (за замовчуванням 4)
3. **Управління запитами**: Перегляд та обробка запитів від студентів
4. **Статистика**: Відстеження кількості доступних, зайнятих та загальних слотів

#### Для адміністраторів:
1. **Підтвердження викладачів**: Перегляд та підтвердження профілів викладачів
2. **Управління довідниками**: Додавання/редагування кафедр та наукових інтересів
3. **Моніторинг**: Перегляд статистики використання платформи

## API Endpoints

Платформа надає REST API через Django REST Framework:

### Профілі (`/api/profiles/`)
- `GET /api/profiles/students/` - Список профілів студентів
- `GET /api/profiles/teachers/` - Список профілів викладачів (тільки підтверджених)
- `GET /api/profiles/departments/` - Список кафедр
- `GET /api/profiles/interests/` - Список наукових інтересів

### Слоти та запити (`/api/searching/`)
- `GET /api/searching/slots/` - Список доступних слотів з фільтрацією
- `POST /api/searching/slots/` - Створення нового слоту (викладачі)
- `GET /api/searching/requests/` - Список запитів користувача
- `POST /api/searching/requests/` - Подання нового запиту (студенти)
- `PATCH /api/searching/requests/{id}/` - Оновлення статусу запиту (викладачі)

## Безпека та аутентифікація

- **Аутентифікація**: Через Django Allauth з підтримкою Microsoft OAuth 2.0
- **Авторизація**: Обмеження доступу на основі ролей (студент/викладач/адмін)
- **Валідація**: Перевірка даних на рівні моделей, форм та API
- **CSRF захист**: Вбудований захист від CSRF атак
- **HTTPS**: Рекомендовано для продакшену
- **Секрети**: Збереження конфіденційних даних у змінних середовища

## Архітектура

### Backend (Django)
- **mentorion**: Головний додаток з налаштуваннями
- **users**: Розширення моделі User, адаптери для allauth
- **profiles**: Управління профілями користувачів
- **searching**: Логіка пошуку та призначення слотів

### Frontend (Django Templates)
- **Шаблони**: HTML шаблони з використанням Django template language
- **Стилізація**: CSS файли в папці `static/css/`
- **Відповідний дизайн**: Адаптивний дизайн для різних пристроїв

### База даних (PostgreSQL)
- **Міграції**: Django migrations для керування схемою БД
- **Зв'язки**: Foreign keys, One-to-One, Many-to-Many відношення
- **Обмеження**: Unique constraints, validation на рівні БД

### Розгортання (Docker)
- **Web сервер**: Gunicorn для обслуговування Django додатку
- **Статичні файли**: Whitenoise для обслуговування статичних файлів
- **База даних**: PostgreSQL в окремому контейнері
- **Оркестрація**: Docker Compose для управління сервісами

## Майбутні покращення

### План розвитку
- **Інтеграція з календарем**: Синхронізація з Google Calendar, Outlook
- **Система повідомлень**: Email та in-app сповіщення
- **Рейтингова система**: Оцінка викладачів студентами
- **Інтеграція з LMS**: Підтримка Moodle, Canvas, Google Classroom
- **Мобільний додаток**: React Native або Flutter додаток
- **Аналітика**: Статистика використання платформи
- **Багатомовність**: Підтримка англійської мови
- **API документація**: Swagger/OpenAPI документація

### Технічні покращення
- **Тестування**: Unit та integration тести
- **CI/CD**: Автоматизація тестування та розгортання
- **Моніторинг**: Логи, метрики, alerts
- **Кешування**: Redis для покращення продуктивності
- **Асинхронність**: Celery для фонових задач
- **Мікросервіси**: Розділення на окремі сервіси при зростанні

## Розробка та внесок

### Налаштування середовища розробки
1. Клонування репозиторію
2. Створення віртуального середовища
3. Встановлення залежностей
4. Налаштування `.env` файлу
5. Запуск міграцій та створення тестових даних

### Кодстайл
- **PEP 8**: Дотримання стандартів Python
- **Django best practices**: Використання Django конвенцій
- **Документація**: Docstrings для всіх функцій та класів

### Тестування
- **Unit тести**: Тестування окремих компонентів
- **Integration тести**: Тестування взаємодії компонентів
- **E2E тести**: Selenium для повного тестування

### Внесок
1. Fork репозиторію
2. Створення feature branch
3. Написання тестів
4. Реалізація функціоналу
5. Pull request з описом змін

## Ліцензія

Цей проєкт є курсовою роботою.

## Автор

Розроблено для курсового проєкту "Підбір керівника для написання курсової роботи".

