{% extends "base.html" %}

{% block title %}–ó–∞–≤–µ—Ä—à—ñ—Ç—å –ø—Ä–æ—Ñ—ñ–ª—å - Mentorion{% endblock %}

{% block content %}
<div class="container-narrow" style="margin-top: 5rem; max-width: 500px; margin-left: auto; margin-right: auto;">
  <div class="card">
    <div class="card-header">
      <h1 class="card-title text-center">‚ú® –ó–∞–≤–µ—Ä—à—ñ—Ç—å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é</h1>
    </div>
    <div class="card-body">
      <p class="text-center mb-4">–ë—É–¥—å –ª–∞—Å–∫–∞, –Ω–∞–¥–∞–π—Ç–µ –¥–æ–¥–∞—Ç–∫–æ–≤—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó</p>

      {% if form.errors %}
      <ul class="messages">
        {% for error in form.non_field_errors %}
        <li class="message error">{{ error }}</li>
        {% endfor %}
      </ul>
      {% endif %}

      <form method="post">
        {% csrf_token %}

        <!-- Role Selection -->
        <div class="form-group">
          <label>–û–±–µ—Ä—ñ—Ç—å –≤–∞—à—É —Ä–æ–ª—å *</label>
          {{ form.role }}
          {% if form.role.errors %}
          <span class="error-message">{{ form.role.errors }}</span>
          {% endif %}
        </div>

        <!-- Student Fields -->
        <div id="student_fields" class="d-none">
          <div class="divider"></div>
          <h2 style="margin-bottom: 1.5rem;">üë®‚Äçüéì –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞</h2>

          <div class="form-group">
            <label for="id_group">–ì—Ä—É–ø–∞ *</label>
            {{ form.group }}
            {% if form.group.errors %}
            <span class="error-message">{{ form.group.errors }}</span>
            {% endif %}
          </div>

          <div class="form-group">
            <label for="id_year_of_study">–ö—É—Ä—Å *</label>
            {{ form.year_of_study }}
            {% if form.year_of_study.errors %}
            <span class="error-message">{{ form.year_of_study.errors }}</span>
            {% endif %}
          </div>

          <div class="form-group">
            <label for="id_specialization">–°–ø–µ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è</label>
            {{ form.specialization }}
            {% if form.specialization.errors %}
            <span class="error-message">{{ form.specialization.errors }}</span>
            {% endif %}
          </div>

          <div class="form-group">
            <label for="id_course_topic">–¢–µ–º–∞ –∫—É—Ä—Å–æ–≤–æ—ó —Ä–æ–±–æ—Ç–∏</label>
            {{ form.course_topic }}
            {% if form.course_topic.errors %}
            <span class="error-message">{{ form.course_topic.errors }}</span>
            {% endif %}
          </div>

          <div class="form-group">
            <label for="id_student_department">–ö–∞—Ñ–µ–¥—Ä–∞ (–æ–±–æ–≤'—è–∑–∫–æ–≤–æ –¥–ª—è 3-4 –∫—É—Ä—Å—É)</label>
            {{ form.student_department }}
            {% if form.student_department.errors %}
            <span class="error-message">{{ form.student_department.errors }}</span>
            {% endif %}
            <span class="form-help">–û–±–µ—Ä—ñ—Ç—å –∫–∞—Ñ–µ–¥—Ä—É, —è–∫—â–æ –≤–∏ –Ω–∞ 3-–º—É –∞–±–æ 4-–º—É –∫—É—Ä—Å—ñ</span>
          </div>
        </div>

        <!-- Teacher Fields -->
        <div id="teacher_fields" class="d-none">
          <div class="divider"></div>
          <h2 style="margin-bottom: 1.5rem;">üë®‚Äçüè´ –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –¥–ª—è –≤–∏–∫–ª–∞–¥–∞—á–∞</h2>

          <div class="form-group">
            <label for="id_teacher_department">–ö–∞—Ñ–µ–¥—Ä–∞ *</label>
            {{ form.teacher_department }}
            {% if form.teacher_department.errors %}
            <span class="error-message">{{ form.teacher_department.errors }}</span>
            {% endif %}
          </div>

          <div class="form-group">
            <label>–ù–∞—É–∫–æ–≤—ñ —ñ–Ω—Ç–µ—Ä–µ—Å–∏</label>
            {{ form.scientific_interests }}
            {% if form.scientific_interests.errors %}
            <span class="error-message">{{ form.scientific_interests.errors }}</span>
            {% endif %}
            <span class="form-help">–û–±–µ—Ä—ñ—Ç—å –¥–µ–∫—ñ–ª—å–∫–∞ –æ–±–ª–∞—Å—Ç–µ–π, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ</span>
          </div>

          <div class="form-group">
            <label for="id_bio">–ü—Ä–æ —Å–µ–±–µ</label>
            {{ form.bio }}
            {% if form.bio.errors %}
            <span class="error-message">{{ form.bio.errors }}</span>
            {% endif %}
            <span class="form-help">–†–æ–∑–∫–∞–∂—ñ—Ç—å –∫–æ—Ä–æ—Ç–∫–æ –ø—Ä–æ —Å–≤—ñ–π –¥–æ—Å–≤—ñ–¥ —Ç–∞ —ñ–Ω—Ç–µ—Ä–µ—Å–∏</span>
          </div>
        </div>

        <div class="divider"></div>
        <button type="submit" class="btn btn-primary btn-lg" style="width: 100%;">
          ‚úÖ –ó–±–µ—Ä–µ–≥—Ç–∏ —Ç–∞ –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏
        </button>
      </form>
    </div>
  </div>
</div>

<style>
  .d-none {
    display: none;
  }
</style>

<script>
  const roleInputs = document.querySelectorAll('input[name="role"]');
  const studentBox = document.getElementById('student_fields');
  const teacherBox = document.getElementById('teacher_fields');

  function toggle() {
    const selectedRole = document.querySelector('input[name="role"]:checked');
    if (selectedRole) {
      const role = selectedRole.value;
      studentBox.classList.toggle('d-none', role !== 'student');
      teacherBox.classList.toggle('d-none', role !== 'teacher');
    }
  }

  roleInputs.forEach(input => {
    input.addEventListener('change', toggle);
  });

  toggle(); // Initialize on page load
</script>
{% endblock %}